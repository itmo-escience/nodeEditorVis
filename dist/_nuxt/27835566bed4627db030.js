/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{0:function(t,e,n){"use strict";function r(t,e,n,r,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void n(t)}d.done?e(f):Promise.resolve(f).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,c){var l=t.apply(e,n);function d(t){r(l,o,c,d,f,"next",t)}function f(t){r(l,o,c,d,f,"throw",t)}d(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},e=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(source).filter((function(t){return Object.getOwnPropertyDescriptor(source,t).enumerable})))),e.forEach((function(e){f(t,e,source[e])}))}return t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,p){return(A=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?y(t):e}function w(t,e,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=m(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(n):desc.value}})(t,e,n||t)}function x(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return N})),n.d(e,"b",(function(){return X}));var E=function t(e){c(this,t),f(this,"name",void 0),f(this,"data",{}),f(this,"engine",null),this.name=e},S=function(){function t(e){c(this,t),f(this,"name",void 0),f(this,"id",void 0),f(this,"position",[0,0]),f(this,"inputs",new Map),f(this,"outputs",new Map),f(this,"controls",new Map),f(this,"data",{}),f(this,"meta",{}),this.name=e,this.id=t.incrementId()}return d(t,[{key:"_add",value:function(t,e,n){if(t.has(e.key))throw new Error("Item with key '".concat(e.key,"' already been added to the node"));if(null!==e[n])throw new Error("Item has already been added to some node");e[n]=this,t.set(e.key,e)}},{key:"addControl",value:function(t){return this._add(this.controls,t,"parent"),this}},{key:"removeControl",value:function(t){t.parent=null,this.controls.delete(t.key)}},{key:"addInput",value:function(input){return this._add(this.inputs,input,"node"),this}},{key:"removeInput",value:function(input){input.removeConnections(),input.node=null,this.inputs.delete(input.key)}},{key:"addOutput",value:function(output){return this._add(this.outputs,output,"node"),this}},{key:"removeOutput",value:function(output){output.removeConnections(),output.node=null,this.outputs.delete(output.key)}},{key:"getConnections",value:function(){return[].concat(C(this.inputs.values()),C(this.outputs.values())).reduce((function(t,e){return[].concat(C(t),C(e.connections))}),[])}},{key:"update",value:function(){}},{key:"toJSON",value:function(){var t=function(t){return Array.from(t).reduce((function(t,e){var n=x(e,2),r=n[0],o=n[1];return t[r]=o.toJSON(),t}),{})};return{id:this.id,data:this.data,inputs:t(this.inputs),outputs:t(this.outputs),position:this.position,name:this.name}}}],[{key:"incrementId",value:function(){return this.latestId?this.latestId++:this.latestId=1,this.latestId}},{key:"resetId",value:function(){this.latestId=0}},{key:"fromJSON",value:function(e){var n=new t(e.name),r=x(e.position,2),o=r[0],c=r[1];return n.id=e.id,n.data=e.data,n.position=[o,c],n.name=e.name,t.latestId=Math.max(n.id,t.latestId),n}}]),t}();f(S,"latestId",0);var O=function(t){function e(t){var n;return c(this,e),f(y(n=k(this,m(e).call(this,t))),"editor",null),f(y(n),"data",{}),n}var n,r;return v(e,t),d(e,[{key:"build",value:(r=o(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.builder(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"createNode",value:(n=o(regeneratorRuntime.mark((function t(){var data,e,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data=n.length>0&&void 0!==n[0]?n[0]:{},(e=new S(this.name)).data=data,t.next=5,this.build(e);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(E),j=function(){function t(output,input){c(this,t),f(this,"output",void 0),f(this,"input",void 0),f(this,"data",{}),this.output=output,this.input=input,this.data={},this.input.addConnection(this)}return d(t,[{key:"remove",value:function(){this.input.removeConnection(this),this.output.removeConnection(this)}}]),t}(),I=function(){function t(e){if(c(this,t),f(this,"key",void 0),f(this,"data",{}),f(this,"parent",null),this.constructor===t)throw new TypeError("Can not construct abstract class");if(!e)throw new Error("The key parameter is missing in super() of Control ");this.key=e}return d(t,[{key:"getNode",value:function(){if(null===this.parent)throw new Error("Control isn't added to Node/Input");if(this.parent instanceof S)return this.parent;if(!this.parent.node)throw new Error("Control hasn't be added to Input or Node");return this.parent.node}},{key:"getData",value:function(t){return this.getNode().data[t]}},{key:"putData",value:function(t,data){this.getNode().data[t]=data}}]),t}(),_=function(){function t(e){c(this,t),f(this,"events",{}),f(this,"silent",!1),this.events=e instanceof t?e.events:e.handlers}return d(t,[{key:"on",value:function(t,e){var n=this;return(t instanceof Array?t:t.split(" ")).forEach((function(t){if(!n.events[t])throw new Error("The event ".concat(t," does not exist"));n.events[t].push(e)})),this}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t in this.events))throw new Error("The event ".concat(t," cannot be triggered"));return this.events[t].reduce((function(t,n){return!1!==n(e)&&t}),!0)}},{key:"bind",value:function(t){if(this.events[t])throw new Error("The event ".concat(t," is already bound"));this.events[t]=[]}},{key:"exist",value:function(t){return Array.isArray(this.events[t])}}]),t}(),B=function(){function t(e,n,r,o){c(this,t),f(this,"node",null),f(this,"multipleConnections",void 0),f(this,"connections",[]),f(this,"key",void 0),f(this,"name",void 0),f(this,"socket",void 0),this.node=null,this.multipleConnections=o,this.connections=[],this.key=e,this.name=n,this.socket=r}return d(t,[{key:"removeConnection",value:function(t){this.connections.splice(this.connections.indexOf(t),1)}},{key:"removeConnections",value:function(){var t=this;this.connections.forEach((function(e){return t.removeConnection(e)}))}}]),t}(),N=function(t){function e(t,title,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return c(this,e),f(y(r=k(this,m(e).call(this,t,title,n,o))),"control",null),r}return v(e,t),d(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"addConnection",value:function(t){if(!this.multipleConnections&&this.hasConnection())throw new Error("Multiple connections not allowed");this.connections.push(t)}},{key:"addControl",value:function(t){this.control=t,t.parent=this}},{key:"showControl",value:function(){return!this.hasConnection()&&null!==this.control}},{key:"toJSON",value:function(){return{connections:this.connections.map((function(t){if(!t.output.node)throw new Error("Node not added to Output");return{node:t.output.node.id,output:t.output.key,data:t.data}}))}}}]),e}(B),R=function(){function t(){c(this,t)}return d(t,null,[{key:"isValidData",value:function(data){return"string"==typeof data.id&&this.isValidId(data.id)&&data.nodes instanceof Object&&!(data.nodes instanceof Array)}},{key:"isValidId",value:function(t){return/^[\w-]{3,}@[0-9]+\.[0-9]+\.[0-9]+$/.test(t)}},{key:"validate",value:function(t,data){var e=t.split("@"),n=data.id.split("@"),r=[];return this.isValidData(data)||r.push("Data is not suitable"),t!==data.id&&r.push("IDs not equal"),e[0]!==n[0]&&r.push("Names don't match"),e[1]!==n[1]&&r.push("Versions don't match"),{success:Boolean(!r.length),msg:r.join(". ")}}}]),t}(),P=function(t){function e(t,n){var r;if(c(this,e),f(y(r=k(this,m(e).call(this,n))),"id",void 0),f(y(r),"plugins",void 0),f(y(r),"components",void 0),!R.isValidId(t))throw new Error("ID should be valid to name@0.1.0 format");return r.id=t,r.plugins=new Map,r.components=new Map,r}return v(e,t),d(e,[{key:"use",value:function(t,e){if(t.name&&this.plugins.has(t.name))throw new Error("Plugin ".concat(t.name," already in use"));t.install(this,e||{}),this.plugins.set(t.name,e)}},{key:"register",value:function(component){if(this.components.has(component.name))throw new Error("Component ".concat(component.name," already registered"));this.components.set(component.name,component),this.trigger("componentregister",component)}},{key:"destroy",value:function(){this.trigger("destroy")}}]),e}(_);function T(t,e){return window.addEventListener(t,e),function(){window.removeEventListener(t,e)}}var $=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e,n){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){};c(this,t),this.onTranslate=n,this.onStart=r,this.onDrag=o,f(this,"pointerStart",void 0),f(this,"el",void 0),f(this,"destroy",void 0),this.pointerStart=null,this.el=e,this.el.style.touchAction="none",this.el.addEventListener("pointerdown",this.down.bind(this));var l=T("pointermove",this.move.bind(this)),d=T("pointerup",this.up.bind(this));this.destroy=function(){l(),d()}}return d(t,[{key:"down",value:function(t){"mouse"===t.pointerType&&0!==t.button||(t.stopPropagation(),this.pointerStart=[t.pageX,t.pageY],this.onStart(t))}},{key:"move",value:function(t){if(this.pointerStart){t.preventDefault();var e=[t.pageX,t.pageY],n=e[1],r=[e[0]-this.pointerStart[0],n-this.pointerStart[1]],o=this.el.getBoundingClientRect().width/this.el.offsetWidth;this.onTranslate(r[0]/o,r[1]/o,t)}}},{key:"up",value:function(t){this.pointerStart&&(this.pointerStart=null,this.onDrag(t))}}]),t}(),M=function(){function t(e,n,r,o){c(this,t),f(this,"el",void 0),f(this,"intensity",void 0),f(this,"onzoom",void 0),f(this,"previous",null),f(this,"pointers",[]),f(this,"destroy",void 0),this.el=n,this.intensity=r,this.onzoom=o,e.addEventListener("wheel",this.wheel.bind(this)),e.addEventListener("pointerdown",this.down.bind(this)),e.addEventListener("dblclick",this.dblclick.bind(this));var l=T("pointermove",this.move.bind(this)),d=T("pointerup",this.end.bind(this)),h=T("pointercancel",this.end.bind(this));this.destroy=function(){l(),d(),h()}}return d(t,[{key:"wheel",value:function(t){t.preventDefault();var rect=this.el.getBoundingClientRect(),e=t.wheelDelta,n=(e?e/120:-t.deltaY/3)*this.intensity,r=(rect.left-t.clientX)*n,o=(rect.top-t.clientY)*n;this.onzoom(n,r,o,"wheel")}},{key:"touches",value:function(){var t={touches:this.pointers},e=[t.touches[0].clientX,t.touches[0].clientY],n=e[0],r=e[1],o=[t.touches[1].clientX,t.touches[1].clientY],c=o[0],l=o[1];return{cx:(n+c)/2,cy:(r+l)/2,distance:Math.sqrt(Math.pow(n-c,2)+Math.pow(r-l,2))}}},{key:"down",value:function(t){this.pointers.push(t)}},{key:"move",value:function(t){if(this.pointers=this.pointers.map((function(p){return p.pointerId===t.pointerId?t:p})),this.translating){var rect=this.el.getBoundingClientRect(),e=this.touches(),n=e.cx,r=e.cy,o=e.distance;if(null!==this.previous){var c=o/this.previous.distance-1,l=(rect.left-n)*c,d=(rect.top-r)*c;this.onzoom(c,l-(this.previous.cx-n),d-(this.previous.cy-r),"touch")}this.previous={cx:n,cy:r,distance:o}}}},{key:"end",value:function(t){this.previous=null,this.pointers=this.pointers.filter((function(p){return p.pointerId!==t.pointerId}))}},{key:"dblclick",value:function(t){t.preventDefault();var rect=this.el.getBoundingClientRect(),e=4*this.intensity,n=(rect.left-t.clientX)*e,r=(rect.top-t.clientY)*e;this.onzoom(e,n,r,"dblclick")}},{key:"translating",get:function(){return this.pointers.length>=2}}]),t}(),D=function(t){function e(t,n){var r;c(this,e),f(y(r=k(this,m(e).call(this,n))),"el",void 0),f(y(r),"container",void 0),f(y(r),"transform",{k:1,x:0,y:0}),f(y(r),"mouse",{x:0,y:0}),f(y(r),"_startPosition",null),f(y(r),"_zoom",void 0),f(y(r),"_drag",void 0);var o=r.el=document.createElement("div");return r.container=t,o.style.transformOrigin="0 0",r._zoom=new M(t,o,.1,r.onZoom.bind(y(r))),r._drag=new $(t,r.onTranslate.bind(y(r)),r.onStart.bind(y(r))),n.on("destroy",(function(){r._zoom.destroy(),r._drag.destroy()})),r.container.addEventListener("pointermove",r.pointermove.bind(y(r))),r.update(),r}return v(e,t),d(e,[{key:"update",value:function(){var t=this.transform;this.el.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px) scale(").concat(t.k,")")}},{key:"pointermove",value:function(t){var e=t.clientX,n=t.clientY,rect=this.el.getBoundingClientRect(),r=e-rect.left,o=n-rect.top,c=this.transform.k;this.mouse={x:r/c,y:o/c},this.trigger("mousemove",h({},this.mouse))}},{key:"onStart",value:function(){this._startPosition=h({},this.transform)}},{key:"onTranslate",value:function(t,e){this._zoom.translating||this._startPosition&&this.translate(this._startPosition.x+t,this._startPosition.y+e)}},{key:"onZoom",value:function(t,e,n,source){this.zoom(this.transform.k*(1+t),e,n,source),this.update()}},{key:"translate",value:function(t,e){var n={transform:this.transform,x:t,y:e};this.trigger("translate",n)&&(this.transform.x=n.x,this.transform.y=n.y,this.update(),this.trigger("translated"))}},{key:"zoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,source=arguments.length>3?arguments[3]:void 0,r=this.transform.k,o={transform:this.transform,zoom:t,source:source};if(this.trigger("zoom",o)){var c=(r-o.zoom)/(r-t||1);this.transform.k=o.zoom||1,this.transform.x+=e*c,this.transform.y+=n*c,this.update(),this.trigger("zoomed",{source:source})}}},{key:"appendChild",value:function(t){this.el.appendChild(t)}},{key:"removeChild",value:function(t){this.el.removeChild(t)}}]),e}(_),z=function(t){function e(t,n,r,o){var l;return c(this,e),f(y(l=k(this,m(e).call(this,o))),"connection",void 0),f(y(l),"inputNode",void 0),f(y(l),"outputNode",void 0),f(y(l),"el",void 0),l.connection=t,l.inputNode=n,l.outputNode=r,l.el=document.createElement("div"),l.el.style.position="absolute",l.el.style.zIndex="-1",l.trigger("renderconnection",{el:l.el,connection:l.connection,points:l.getPoints()}),l}return v(e,t),d(e,[{key:"getPoints",value:function(){var t=x(this.outputNode.getSocketPosition(this.connection.output),2),e=t[0],n=t[1],r=x(this.inputNode.getSocketPosition(this.connection.input),2);return[e,n,r[0],r[1]]}},{key:"update",value:function(){this.trigger("updateconnection",{el:this.el,connection:this.connection,points:this.getPoints()})}}]),e}(_),L=function(t){function e(t,n,r){var o;return c(this,e),(o=k(this,m(e).call(this,r))).trigger("rendercontrol",{el:t,control:n}),o}return v(e,t),e}(_),U=function(t){function e(t,n,r,o,l){var d,h;return c(this,e),f(y(h=k(this,m(e).call(this,l))),"el",void 0),f(y(h),"type",void 0),f(y(h),"io",void 0),f(y(h),"node",void 0),h.el=t,h.type=n,h.io=r,h.node=o,h.trigger("rendersocket",(f(d={el:t},n,h.io),f(d,"socket",r.socket),d)),h}return v(e,t),d(e,[{key:"getPosition",value:function(t){var e=t.position,n=this.el;return[e[0]+n.offsetLeft+n.offsetWidth/2,e[1]+n.offsetTop+n.offsetHeight/2]}}]),e}(_),Y=function(t){function e(t,component,n){var r;return c(this,e),f(y(r=k(this,m(e).call(this,n))),"node",void 0),f(y(r),"component",void 0),f(y(r),"sockets",new Map),f(y(r),"controls",new Map),f(y(r),"el",void 0),f(y(r),"_startPosition",[]),f(y(r),"_drag",void 0),r.node=t,r.component=component,r.el=document.createElement("div"),r.el.style.position="absolute",r.el.addEventListener("contextmenu",(function(t){return r.trigger("contextmenu",{e:t,node:r.node})})),r._drag=new $(r.el,r.onTranslate.bind(y(r)),r.onSelect.bind(y(r)),(function(){r.trigger("nodedraged",t)})),r.trigger("rendernode",{el:r.el,node:t,component:component.data,bindSocket:r.bindSocket.bind(y(r)),bindControl:r.bindControl.bind(y(r))}),r.update(),r}return v(e,t),d(e,[{key:"clearSockets",value:function(){var t=this,e=[].concat(C(this.node.inputs.values()),C(this.node.outputs.values()));this.sockets.forEach((function(s){e.includes(s.io)||t.sockets.delete(s.io)}))}},{key:"bindSocket",value:function(t,e,n){this.clearSockets(),this.sockets.set(n,new U(t,e,n,this.node,this))}},{key:"bindControl",value:function(t,e){this.controls.set(e,new L(t,e,this))}},{key:"getSocketPosition",value:function(t){var e=this.sockets.get(t);if(!e)throw new Error("Socket not fount for ".concat(t.name," with key ").concat(t.key));return e.getPosition(this.node)}},{key:"onSelect",value:function(t){var e={node:this.node,accumulate:t.ctrlKey,e:t};this.onStart(),this.trigger("multiselectnode",e),this.trigger("selectnode",e)}},{key:"onStart",value:function(){this._startPosition=C(this.node.position)}},{key:"onTranslate",value:function(t,e){this.trigger("translatenode",{node:this.node,dx:t,dy:e})}},{key:"onDrag",value:function(t,e){var n=this._startPosition[0]+t,r=this._startPosition[1]+e;this.translate(n,r)}},{key:"translate",value:function(t,e){var n=this.node,r={node:n,x:t,y:e};if(this.trigger("nodetranslate",r)){var o=x(n.position,2),c=[o[0],o[1]];n.position[0]=r.x,n.position[1]=r.y,this.update(),this.trigger("nodetranslated",{node:n,prev:c})}}},{key:"update",value:function(){var t=x(this.node.position,2),e=t[0],n=t[1];this.el.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}},{key:"remove",value:function(){}},{key:"destroy",value:function(){this._drag.destroy()}}]),e}(_),F=function(t){function e(t,n,r){var o;return c(this,e),f(y(o=k(this,m(e).call(this,r))),"container",void 0),f(y(o),"components",void 0),f(y(o),"nodes",new Map),f(y(o),"connections",new Map),f(y(o),"area",void 0),o.container=t,o.components=n,o.container.style.overflow="hidden",o.container.addEventListener("click",o.click.bind(y(o))),o.container.addEventListener("contextmenu",(function(t){return o.trigger("contextmenu",{e:t,view:y(o)})})),r.on("destroy",T("resize",o.resize.bind(y(o)))),r.on("destroy",(function(){return o.nodes.forEach((function(view){return view.destroy()}))})),o.on("nodetranslated",o.updateConnections.bind(y(o))),o.area=new D(t,y(o)),o.container.appendChild(o.area.el),o}return v(e,t),d(e,[{key:"addNode",value:function(t){var component=this.components.get(t.name);if(!component)throw new Error("Component ".concat(t.name," not found"));var e=new Y(t,component,this);this.nodes.set(t,e),this.area.appendChild(e.el)}},{key:"removeNode",value:function(t){var e=this.nodes.get(t);this.nodes.delete(t),e&&(this.area.removeChild(e.el),e.destroy())}},{key:"addConnection",value:function(t){if(!t.input.node||!t.output.node)throw new Error("Connection input or output not added to node");var e=this.nodes.get(t.input.node),n=this.nodes.get(t.output.node);if(!e||!n)throw new Error("View node not fount for input or output");var r=new z(t,e,n,this);this.connections.set(t,r),this.area.appendChild(r.el)}},{key:"removeConnection",value:function(t){var e=this.connections.get(t);this.connections.delete(t),e&&this.area.removeChild(e.el)}},{key:"updateConnections",value:function(t){var e=this;t.node.getConnections().forEach((function(t){var n=e.connections.get(t);if(!n)throw new Error("Connection view not found");n.update()}))}},{key:"resize",value:function(){var t=this.container;if(!t.parentElement)throw new Error("Container doesn't have parent element");var e=t.parentElement.clientWidth,n=t.parentElement.clientHeight;t.style.width=e+"px",t.style.height=n+"px"}},{key:"click",value:function(t){var e=this.container;e===t.target&&this.trigger("click",{e:t,container:e})}}]),e}(_),H=function(){function t(){c(this,t),f(this,"list",[])}return d(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?this.contains(t)||this.list.push(t):this.list=[t]}},{key:"clear",value:function(){this.list=[]}},{key:"remove",value:function(t){this.list.splice(this.list.indexOf(t),1)}},{key:"contains",value:function(t){return-1!==this.list.indexOf(t)}},{key:"each",value:function(t){this.list.forEach(t)}}]),t}(),W=function t(e){c(this,t),f(this,"handlers",void 0),this.handlers=h({warn:[console.warn],error:[console.error],componentregister:[],destroy:[]},e)},J=function(t){function e(){return c(this,e),k(this,m(e).call(this,{nodecreate:[],nodecreated:[],noderemove:[],noderemoved:[],connectioncreate:[],connectioncreated:[],connectionremove:[],connectionremoved:[],translatenode:[],nodetranslate:[],nodetranslated:[],nodedraged:[],selectnode:[],multiselectnode:[],nodeselect:[],nodeselected:[],rendernode:[],rendersocket:[],rendercontrol:[],renderconnection:[],updateconnection:[],keydown:[],keyup:[],translate:[],translated:[],zoom:[],zoomed:[],click:[],mousemove:[],contextmenu:[],import:[],export:[],process:[],clear:[]}))}return v(e,t),e}(W),V=function(t){function e(t,n){var r;return c(this,e),f(y(r=k(this,m(e).call(this,t,new J))),"nodes",[]),f(y(r),"selected",new H),f(y(r),"view",void 0),r.view=new F(n,r.components,y(r)),r.on("destroy",T("keydown",(function(t){return r.trigger("keydown",t)}))),r.on("destroy",T("keyup",(function(t){return r.trigger("keyup",t)}))),r.on("selectnode",(function(t){var e=t.node,n=t.accumulate;return r.selectNode(e,n)})),r.on("nodeselected",(function(){return r.selected.each((function(t){var e=r.view.nodes.get(t);e&&e.onStart()}))})),r.on("translatenode",(function(t){var e=t.dx,n=t.dy;return r.selected.each((function(t){var o=r.view.nodes.get(t);o&&o.onDrag(e,n)}))})),r}var n;return v(e,t),d(e,[{key:"addNode",value:function(t){this.trigger("nodecreate",t)&&(this.nodes.push(t),this.view.addNode(t),this.trigger("nodecreated",t))}},{key:"removeNode",value:function(t){var e=this;this.trigger("noderemove",t)&&(t.getConnections().forEach((function(t){return e.removeConnection(t)})),this.nodes.splice(this.nodes.indexOf(t),1),this.view.removeNode(t),this.trigger("noderemoved",t))}},{key:"connect",value:function(output,input){var data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.trigger("connectioncreate",{output:output,input:input}))try{var t=output.connectTo(input);t.data=data,this.view.addConnection(t),this.trigger("connectioncreated",t)}catch(t){this.trigger("warn",t)}}},{key:"removeConnection",value:function(t){this.trigger("connectionremove",t)&&(this.view.removeConnection(t),t.remove(),this.trigger("connectionremoved",t))}},{key:"selectNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(-1===this.nodes.indexOf(t))throw new Error("Node not exist in list");this.trigger("nodeselect",t)&&(this.selected.add(t,e),this.trigger("nodeselected",t))}},{key:"getComponent",value:function(t){var component=this.components.get(t);if(!component)throw"Component ".concat(t," not found");return component}},{key:"register",value:function(component){w(m(e.prototype),"register",this).call(this,component),component.editor=this}},{key:"clear",value:function(){var t=this;C(this.nodes).forEach((function(e){return t.removeNode(e)})),this.trigger("clear")}},{key:"toJSON",value:function(){var data={id:this.id,nodes:{}};return this.nodes.forEach((function(t){return data.nodes[t.id]=t.toJSON()})),this.trigger("export",data),data}},{key:"beforeImport",value:function(t){var e=R.validate(this.id,t);return e.success?(this.silent=!0,this.clear(),this.trigger("import",t),!0):(this.trigger("warn",e.msg),!1)}},{key:"afterImport",value:function(){return this.silent=!1,!0}},{key:"fromJSON",value:(n=o(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.beforeImport(e)){t.next=2;break}return t.abrupt("return",!1);case 2:return n={},t.prev=3,t.next=6,Promise.all(Object.keys(e.nodes).map(function(){var t=o(regeneratorRuntime.mark((function t(o){var c,component;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.nodes[o],component=r.getComponent(c.name),t.next=4,component.build(S.fromJSON(c));case 4:n[o]=t.sent,r.addNode(n[o]);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:Object.keys(e.nodes).forEach((function(t){var o=e.nodes[t],c=n[t];Object.keys(o.outputs).forEach((function(t){o.outputs[t].connections.forEach((function(e){var o=e.node,data=e.data,l=c.outputs.get(t),d=n[o].inputs.get(e.input);if(!l||!d)return r.trigger("error","IO not found for node ".concat(c.id));r.connect(l,d,data)}))}))})),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),this.trigger("warn",t.t0),t.abrupt("return",!this.afterImport());case 13:return t.abrupt("return",this.afterImport());case 14:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t){return n.apply(this,arguments)})}]),e}(P),X=function(t){function e(t,title,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return c(this,e),k(this,m(e).call(this,t,title,n,r))}return v(e,t),d(e,[{key:"hasConnection",value:function(){return this.connections.length>0}},{key:"connectTo",value:function(input){if(!this.socket.compatibleWith(input.socket))throw new Error("Sockets not compatible");if(!input.multipleConnections&&input.hasConnection())throw new Error("Input already has one connection");if(!this.multipleConnections&&this.hasConnection())throw new Error("Output already has one connection");var t=new j(this,input);return this.connections.push(t),t}},{key:"connectedTo",value:function(input){return this.connections.some((function(t){return t.input===input}))}},{key:"toJSON",value:function(){return{connections:this.connections.map((function(t){if(!t.input.node)throw new Error("Node not added to Input");return{node:t.input.node.id,input:t.input.key,data:t.data}}))}}}]),e}(B),Z=function(){function t(e){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t),f(this,"name",void 0),f(this,"data",void 0),f(this,"compatible",[]),this.name=e,this.data=data,this.compatible=[]}return d(t,[{key:"combineWith",value:function(t){this.compatible.push(t)}},{key:"compatibleWith",value:function(t){return this===t||this.compatible.includes(t)}}]),t}();var G=function(){function t(e){c(this,t),f(this,"nodes",void 0),this.nodes=e}return d(t,[{key:"extractInputNodes",value:function(t){var e=this;return Object.keys(t.inputs).reduce((function(n,r){var o=(t.inputs[r].connections||[]).reduce((function(b,t){return[].concat(C(b),[e.nodes[t.node]])}),[]);return[].concat(C(n),C(o))}),[])}},{key:"findSelf",value:function(t,e){var n,r=(n=e,t.filter((function(t){return-1!==n.indexOf(t)})));if(r.length)return r[0];var o=!0,c=!1,l=void 0;try{for(var d,f=e[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var h=d.value,v=[h].concat(C(t)),m=this.findSelf(v,this.extractInputNodes(h));if(m)return m}}catch(t){c=!0,l=t}finally{try{o||null==f.return||f.return()}finally{if(c)throw l}}return null}},{key:"detect",value:function(){var t=this,e=Object.keys(this.nodes).map((function(e){return t.nodes[e]})),n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var d=c.value,f=this.findSelf([d],this.extractInputNodes(d));if(f)return f}}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return null}}]),t}(),K=0,Q=1,tt=2,et=function(t){function e(){return c(this,e),k(this,m(e).call(this,{}))}return v(e,t),e}(W),nt={Engine:function(t){function e(t){var n;return c(this,e),f(y(n=k(this,m(e).call(this,t,new et))),"args",[]),f(y(n),"data",null),f(y(n),"state",K),f(y(n),"onAbort",(function(){})),n}var n,r,l,h,A,w,x,E,S,O,j;return v(e,t),d(e,[{key:"clone",value:function(){var t=new e(this.id);return this.components.forEach((function(e){return t.register(e)})),t}},{key:"throwError",value:(j=o(regeneratorRuntime.mark((function t(e){var data,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data=n.length>1&&void 0!==n[1]?n[1]:null,t.next=3,this.abort();case 3:return this.trigger("error",{message:e,data:data}),this.processDone(),t.abrupt("return","error");case 6:case"end":return t.stop()}}),t,this)}))),function(t){return j.apply(this,arguments)})},{key:"processStart",value:function(){return this.state===K?(this.state=Q,!0):(this.state===tt||console.warn("The process is busy and has not been restarted.\n                Use abort() to force it to complete"),!1)}},{key:"processDone",value:function(){var t=this.state!==tt;return this.state=K,t||(this.onAbort(),this.onAbort=function(){}),t}},{key:"abort",value:(O=o(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.state===Q?(e.state=tt,e.onAbort=t):e.state===tt?(e.onAbort(),e.onAbort=t):t()})));case 1:case"end":return t.stop()}}),t)}))),function(){return O.apply(this,arguments)})},{key:"lock",value:(S=o(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.unlockPool=e.unlockPool||[],e.busy&&!e.outputData?e.unlockPool.push(t):t(),e.busy=!0})));case 1:case"end":return t.stop()}}),t)}))),function(t){return S.apply(this,arguments)})},{key:"unlock",value:function(t){t.unlockPool.forEach((function(a){return a()})),t.unlockPool=[],t.busy=!1}},{key:"extractInputData",value:(E=o(regeneratorRuntime.mark((function t(e){var n,r,c,l,input,d,f,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={},r=0,c=Object.keys(e.inputs);case 2:if(!(r<c.length)){t.next=13;break}return l=c[r],input=e.inputs[l],d=input.connections,t.next=8,Promise.all(d.map(function(){var t=o(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.data.nodes[e.node],t.next=3,h.processNode(n);case 3:if(r=t.sent){t.next=8;break}h.abort(),t.next=9;break;case 8:return t.abrupt("return",r[e.output]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:f=t.sent,n[l]=f;case 10:r++,t.next=2;break;case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t)}))),function(t){return E.apply(this,arguments)})},{key:"processWorker",value:(x=o(regeneratorRuntime.mark((function t(e){var n,component,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractInputData(e);case 2:return n=t.sent,component=this.components.get(e.name),r={},t.prev=5,t.next=8,component.worker.apply(component,[e,n,r].concat(C(this.args)));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),this.abort(),this.trigger("warn",t.t0);case 14:return t.abrupt("return",r);case 15:case"end":return t.stop()}}),t,this,[[5,10]])}))),function(t){return x.apply(this,arguments)})},{key:"processNode",value:(w=o(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state!==tt&&e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.lock(e);case 4:if(e.outputData){t.next=8;break}return t.next=7,this.processWorker(e);case 7:e.outputData=t.sent;case 8:return this.unlock(e),t.abrupt("return",e.outputData);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return w.apply(this,arguments)})},{key:"forwardProcess",value:(A=o(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state!==tt){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,Promise.all(Object.keys(e.outputs).map(function(){var t=o(regeneratorRuntime.mark((function t(r){var output;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return output=e.outputs[r],t.next=3,Promise.all(output.connections.map(function(){var t=o(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.data.nodes[e.node],t.next=3,n.processNode(r);case 3:return t.next=5,n.forwardProcess(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return A.apply(this,arguments)})},{key:"copy",value:function(data){return(data=Object.assign({},data)).nodes=Object.assign({},data.nodes),Object.keys(data.nodes).forEach((function(t){data.nodes[t]=Object.assign({},data.nodes[t])})),data}},{key:"validate",value:(h=o(regeneratorRuntime.mark((function t(data){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=R.validate(this.id,data),n=new G(data.nodes),e.success){t.next=6;break}return t.next=5,this.throwError(e.msg);case 5:return t.abrupt("return",t.sent);case 6:if(!(r=n.detect())){t.next=11;break}return t.next=10,this.throwError("Recursion detected",r);case 10:return t.abrupt("return",t.sent);case 11:return t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"processStartNode",value:(l=o(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(n=this.data.nodes[e]){t.next=7;break}return t.next=6,this.throwError("Node with such id not found");case 6:return t.abrupt("return",t.sent);case 7:return t.next=9,this.processNode(n);case 9:return t.next=11,this.forwardProcess(n);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"processUnreachable",value:(r=o(regeneratorRuntime.mark((function t(){var data,i,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:data=this.data,t.t0=regeneratorRuntime.keys(data.nodes);case 2:if((t.t1=t.t0()).done){t.next=12;break}if(i=t.t1.value,void 0!==(e=data.nodes[i]).outputData){t.next=10;break}return t.next=8,this.processNode(e);case 8:return t.next=10,this.forwardProcess(e);case 10:t.next=2;break;case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"process",value:(n=o(regeneratorRuntime.mark((function t(data){var e,n,r,o,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c.length>1&&void 0!==c[1]?c[1]:null,this.processStart()){t.next=3;break}return t.abrupt("return");case 3:if(this.validate(data)){t.next=5;break}return t.abrupt("return");case 5:for(this.data=this.copy(data),n=c.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=c[o];return this.args=r,t.next=10,this.processStartNode(e);case 10:return t.next=12,this.processUnreachable();case 12:return t.abrupt("return",this.processDone()?"success":"aborted");case 13:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),e}(P),Recursion:G,Component:O,Control:I,Connection:j,Emitter:_,Input:N,IO:B,Node:S,NodeEditor:V,Output:X,Socket:Z};e.c=nt},10:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(22);function o(t,e){return!e||"object"!==Object(r.a)(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}},102:function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)}))}},104:function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(t,e){return!1!==e.clone&&e.isMergeableObject(t)?v((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function l(t,source,e){return t.concat(source).map((function(element){return c(element,e)}))}function d(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(symbol){return t.propertyIsEnumerable(symbol)})):[]}(t))}function f(object,t){try{return t in object}catch(t){return!1}}function h(t,source,e){var n={};return e.isMergeableObject(t)&&d(t).forEach((function(r){n[r]=c(t[r],e)})),d(source).forEach((function(r){(function(t,e){return f(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(f(t,r)&&e.isMergeableObject(source[r])?n[r]=function(t,e){if(!e.customMerge)return v;var n=e.customMerge(t);return"function"==typeof n?n:v}(r,e)(t[r],source[r],e):n[r]=c(source[r],e))})),n}function v(t,source,e){(e=e||{}).arrayMerge=e.arrayMerge||l,e.isMergeableObject=e.isMergeableObject||r,e.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(t)?n?e.arrayMerge(t,source,e):h(t,source,e):c(source,e)}v.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return v(t,n,e)}),{})};var m=v;t.exports=m},105:function(t,e,n){"use strict";var r=n(0);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t){return t.toLowerCase().replace(/ /g,"-")}function v(t,e,n){var data={points:e,connection:n,d:""};return t.trigger("connectionpath",data),data.d||function(t,e){var n=f(t,4),r=n[0],o=n[1],c=n[2],l=n[3],d=r+Math.abs(c-r)*e,h=c-Math.abs(c-r)*e;return"M ".concat(r," ").concat(o," C ").concat(d," ").concat(o," ").concat(h," ").concat(l," ").concat(c," ").concat(l)}(e,.4)}function m(t){var e=t.el,n=t.d,path=e.querySelector(".connection path");if(!path)throw new Error("Path of connection was broken");path.setAttribute("d",n)}function A(t){var e,n=t.el,r=t.d,o=t.connection,c=o?["input-"+h(o.input.name),"output-"+h(o.output.name),"socket-input-"+h(o.input.socket.name),"socket-output-"+h(o.output.socket.name)]:[],svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),path=document.createElementNS("http://www.w3.org/2000/svg","path");(e=svg.classList).add.apply(e,["connection"].concat(c)),path.classList.add("main-path"),path.setAttribute("d",r),svg.appendChild(path),n.appendChild(svg),m({el:n,d:r})}var y=function(){function t(e,n){o(this,t),this.emitter=e,this.editorView=n,d(this,"el",void 0),this.el=document.createElement("div"),this.el.style.position="absolute",this.editorView.area.appendChild(this.el)}return l(t,[{key:"updatePseudoConnection",value:function(t){null!==t?this.renderConnection(t):this.el.parentElement&&(this.el.innerHTML="")}},{key:"getPoints",value:function(t){var e=this.editorView.area.mouse;if(!t.node)throw new Error("Node in output/input not found");var n=this.editorView.nodes.get(t.node);if(!n)throw new Error("Node view not found");var o=f(n.getSocketPosition(t),2),c=o[0],l=o[1];return t instanceof r.b?[c,l,e.x,e.y]:[e.x,e.y,c,l]}},{key:"updateConnection",value:function(t){var e=v(this.emitter,this.getPoints(t));m({el:this.el,d:e})}},{key:"renderConnection",value:function(t){var e=v(this.emitter,this.getPoints(t));A({el:this.el,d:e})}}]),t}(),k=function(){function t(e){var n=this;o(this,t),d(this,"editor",void 0),d(this,"_io",null),d(this,"view",void 0),this.editor=e,this.view=new y(e,e.view),e.on("mousemove",(function(){return n.io&&n.view.updateConnection(n.io)}))}return l(t,[{key:"reset",value:function(){this.io=null}},{key:"pickOutput",value:function(output){if(this.editor.trigger("connectionpick",output)){if(this.io instanceof r.a)return!output.multipleConnections&&output.hasConnection()&&this.editor.removeConnection(output.connections[0]),this.editor.connect(output,this.io),void this.reset();this.io&&this.reset(),this.io=output}}},{key:"pickInput",value:function(input){var t=this;if(this.editor.trigger("connectionpick",input)){if(null===this.io)return input.hasConnection()?(this.io=input.connections[0].output,this.editor.removeConnection(input.connections[0])):this.io=input,!0;if(!input.multipleConnections&&input.hasConnection()&&this.editor.removeConnection(input.connections[0]),!this.io.multipleConnections&&this.io.hasConnection()&&this.editor.removeConnection(this.io.connections[0]),this.io instanceof r.b&&this.io.connectedTo(input)){var e=input.connections.find((function(e){return e.output===t.io}));e&&this.editor.removeConnection(e)}this.io instanceof r.b&&(this.editor.connect(this.io,input),this.reset())}}},{key:"pickConnection",value:function(t){var output=t.output;this.editor.removeConnection(t),this.io=output}},{key:"io",get:function(){return this._io},set:function(t){this._io=t,this.view.updatePseudoConnection(t)}}]),t}(),w=function(){function t(e){o(this,t),d(this,"picker",void 0),d(this,"target",void 0),this.picker=e,this.target=null}return l(t,[{key:"act",value:function(t){var input=t.input,output=t.output;this.unlock(input||output)||(input?this.picker.pickInput(input):output?this.picker.pickOutput(output):this.picker.reset())}},{key:"start",value:function(t,e){this.act(t),this.target=e}},{key:"complete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.act(t)}},{key:"hasTarget",value:function(){return Boolean(this.target)}},{key:"unlock",value:function(t){var e=this.target;return this.target=null,e&&e===t}}]),t}();!function(t){if(t&&"undefined"!=typeof window){var style=document.createElement("style");style.setAttribute("type","text/css"),style.innerHTML=t,document.head.appendChild(style)}}(".connection {\n  overflow: visible !important;\n  position: absolute;\n  z-index: -1;\n  pointer-events: none; }\n  .connection > * {\n    pointer-events: all; }\n  .connection .main-path {\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue; }\n");var x={name:"connection",install:function(t){t.bind("connectionpath"),t.bind("connectiondrop"),t.bind("connectionpick"),t.bind("resetconnection");var e=new k(t),n=new w(e),r=new WeakMap;function o(e){var o=r.get(this);if(o){var input=o.input,output=o.output;t.view.container.dispatchEvent(new PointerEvent("pointermove",e)),e.preventDefault(),e.stopPropagation(),n.start({input:input,output:output},input||output)}}function c(o){var c=document.elementFromPoint(o.clientX,o.clientY);e.io&&t.trigger("connectiondrop",e.io),c&&n.complete(function t(map,e){return map.get(e)||(e.parentElement?t(map,e.parentElement):null)}(r,c)||{})}t.on("resetconnection",(function(){return n.complete()})),t.on("rendersocket",(function(t){var e=t.el,input=t.input,output=t.output;r.set(e,{input:input,output:output}),e.removeEventListener("pointerdown",o),e.addEventListener("pointerdown",o)})),window.addEventListener("pointerup",c),t.on("renderconnection",(function(e){var n=e.el,r=e.connection,o=e.points;A({el:n,d:v(t,o,r),connection:r})})),t.on("updateconnection",(function(e){var n=e.el,r=e.connection,o=e.points;m({el:n,d:v(t,o,r)})})),t.on("destroy",(function(){window.removeEventListener("pointerup",c)}))}};e.a=x},106:function(t,e,n){"use strict";var r=n(1);function o(t,e,n,r,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void n(t)}d.done?e(f):Promise.resolve(f).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,c){var l=t.apply(e,n);function d(t){o(l,r,c,d,f,"next",t)}function f(t){o(l,r,c,d,f,"throw",t)}d(void 0)}))}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},e=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(source).filter((function(t){return Object.getOwnPropertyDescriptor(source,t).enumerable})))),e.forEach((function(e){l(t,e,source[e])}))}return t}r.a.filter("kebab",(function(t){var e=function(s){return s.toLowerCase().replace(/ /g,"-")};return Array.isArray(t)?t.map(e):e(t)}));var f={props:["node","editor","bindSocket","bindControl"],methods:{inputs:function(){return Array.from(this.node.inputs.values())},outputs:function(){return Array.from(this.node.outputs.values())},controls:function(){return Array.from(this.node.controls.values())},selected:function(){return this.editor.selected.contains(this.node)?"selected":""}},directives:{socket:{bind:function(t,e,n){n.context.bindSocket(t,e.arg,e.value)},update:function(t,e,n){n.context.bindSocket(t,e.arg,e.value)}},control:{bind:function(t,e,n){e.value&&n.context.bindControl(t,e.value)}}}};var h=function(template,style,script,t,e,n,r,o,c,l){"boolean"!=typeof r&&(c=o,o=r,r=!1);var d,f="function"==typeof script?script.options:script;if(template&&template.render&&(f.render=template.render,f.staticRenderFns=template.staticRenderFns,f._compiled=!0,e&&(f.functional=!0)),t&&(f._scopeId=t),n?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),style&&style.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},f._ssrRegister=d):style&&(d=r?function(){style.call(this,l(this.$root.$options.shadowRoot))}:function(t){style.call(this,o(t))}),d)if(f.functional){var h=f.render;f.render=function(t,e){return d.call(e),h(t,e)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,d):[d]}return script},v="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var m=document.head||document.getElementsByTagName("head")[0],A={};var y=function(t){return function(t,style){return function(t,e){var n=v?e.media||"default":t,style=A[n]||(A[n]={ids:new Set,styles:[]});if(!style.ids.has(t)){style.ids.add(t);var code=e.source;if(e.map&&(code+="\n/*# sourceURL="+e.map.sources[0]+" */",code+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),style.element||(style.element=document.createElement("style"),style.element.type="text/css",e.media&&style.element.setAttribute("media",e.media),m.appendChild(style.element)),"styleSheet"in style.element)style.styles.push(code),style.element.styleSheet.cssText=style.styles.filter(Boolean).join("\n");else{var r=style.ids.size-1,o=document.createTextNode(code),c=style.element.childNodes;c[r]&&style.element.removeChild(c[r]),c.length?style.element.insertBefore(o,c[r]):style.element.appendChild(o)}}}(t,style)}};const k={props:["type","socket"]};var w=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"socket",class:this._f("kebab")([this.type,this.socket.name]),attrs:{title:this.socket.name}})};w._withStripped=!0;var x=h({render:w,staticRenderFns:[]},(function(t){t&&t("data-v-212b9c54_0",{source:".socket[data-v-212b9c54] {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid white;\n  border-radius: 12px;\n  width: 24px;\n  height: 24px;\n  margin: 6px;\n  vertical-align: middle;\n  background: #96b38a;\n  z-index: 2;\n  box-sizing: border-box;\n}\n.socket[data-v-212b9c54]:hover {\n    border-width: 4px;\n}\n.socket.multiple[data-v-212b9c54] {\n    border-color: yellow;\n}\n.socket.output[data-v-212b9c54] {\n    margin-right: -12px;\n}\n.socket.input[data-v-212b9c54] {\n    margin-left: -12px;\n}\n\n/*# sourceMappingURL=Socket.vue.map */",map:{version:3,sources:["/home/travis/build/retejs/vue-render-plugin/src/Socket.vue","Socket.vue"],names:[],mappings:"AAgBA;EACA,qBAAA;EACA,eAAA;EACA,uBAAA;EACA,mBAAA;EACA,WAAA;EACA,YAAA;EACA,WAAA;EACA,sBAAA;EACA,mBAAA;EACA,UAAA;EACA,sBAAA;AAAA;AAXA;IAaA,iBAAA;AAAA;AAbA;IAeA,oBAAA;AAAA;AAfA;IAiBA,mBAAA;AAAA;AAjBA;IAmBA,kBAAA;AAAA;;ACdA,qCAAqC",file:"Socket.vue",sourcesContent:['<template lang="pug">\n.socket(\n  :class="[type, socket.name] | kebab",\n  :title="socket.name"\n)\n</template>\n\n<script>\nexport default {\n  props: [\'type\', \'socket\']\n}\n<\/script>\n\n<style lang="sass" scoped>\n@import "./vars"\n\n.socket\n  display: inline-block\n  cursor: pointer\n  border: 1px solid white\n  border-radius: $socket-size/2.0\n  width: $socket-size\n  height: $socket-size\n  margin: $socket-margin\n  vertical-align: middle\n  background: $socket-color\n  z-index: 2\n  box-sizing: border-box\n  &:hover\n    border-width: 4px\n  &.multiple\n    border-color: yellow\n  &.output\n    margin-right: - $socket-size / 2\n  &.input\n    margin-left: - $socket-size / 2\n</style>\n',".socket {\n  display: inline-block;\n  cursor: pointer;\n  border: 1px solid white;\n  border-radius: 12px;\n  width: 24px;\n  height: 24px;\n  margin: 6px;\n  vertical-align: middle;\n  background: #96b38a;\n  z-index: 2;\n  box-sizing: border-box; }\n  .socket:hover {\n    border-width: 4px; }\n  .socket.multiple {\n    border-color: yellow; }\n  .socket.output {\n    margin-right: -12px; }\n  .socket.input {\n    margin-left: -12px; }\n\n/*# sourceMappingURL=Socket.vue.map */"]},media:void 0})}),k,"data-v-212b9c54",!1,void 0,y,void 0);const C={mixins:[f],components:{Socket:x}};var E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node",class:t._f("kebab")([t.selected(),t.node.name])},[n("div",{staticClass:"title"},[t._v(t._s(t.node.name))]),t._l(t.outputs(),(function(output){return n("div",{key:output.key,staticClass:"output"},[n("div",{staticClass:"output-title"},[t._v(t._s(output.name))]),n("Socket",{directives:[{name:"socket",rawName:"v-socket:output",value:output,expression:"output",arg:"output"}],attrs:{type:"output",socket:output.socket}})],1)})),t._l(t.controls(),(function(t){return n("div",{directives:[{name:"control",rawName:"v-control",value:t,expression:"control"}],staticClass:"control"})})),t._l(t.inputs(),(function(input){return n("div",{key:input.key,staticClass:"input"},[n("Socket",{directives:[{name:"socket",rawName:"v-socket:input",value:input,expression:"input",arg:"input"}],attrs:{type:"input",socket:input.socket}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!input.showControl(),expression:"!input.showControl()"}],staticClass:"input-title"},[t._v(t._s(input.name))]),n("div",{directives:[{name:"show",rawName:"v-show",value:input.showControl(),expression:"input.showControl()"},{name:"control",rawName:"v-control",value:input.control,expression:"input.control"}],staticClass:"input-control"})],1)}))],2)};E._withStripped=!0;var S=h({render:E,staticRenderFns:[]},(function(t){t&&t("data-v-61cff9dc_0",{source:".node[data-v-61cff9dc] {\n  background: rgba(110, 136, 255, 0.8);\n  border: 2px solid #4e58bf;\n  border-radius: 10px;\n  cursor: pointer;\n  min-width: 180px;\n  height: auto;\n  padding-bottom: 6px;\n  box-sizing: content-box;\n  position: relative;\n  user-select: none;\n}\n.node[data-v-61cff9dc]:hover {\n    background: rgba(130, 153, 255, 0.8);\n}\n.node.selected[data-v-61cff9dc] {\n    background: #ffd92c;\n    border-color: #e3c000;\n}\n.node .title[data-v-61cff9dc] {\n    color: white;\n    font-family: sans-serif;\n    font-size: 18px;\n    padding: 8px;\n}\n.node .output[data-v-61cff9dc] {\n    text-align: right;\n}\n.node .input[data-v-61cff9dc] {\n    text-align: left;\n}\n.node .input-title[data-v-61cff9dc], .node .output-title[data-v-61cff9dc] {\n    vertical-align: middle;\n    color: white;\n    display: inline-block;\n    font-family: sans-serif;\n    font-size: 14px;\n    margin: 6px;\n    line-height: 24px;\n}\n.node .input-control[data-v-61cff9dc] {\n    z-index: 1;\n    width: calc(100% - 36px);\n    vertical-align: middle;\n    display: inline-block;\n}\n.node .control[data-v-61cff9dc] {\n    padding: 6px 18px;\n}\n\n/*# sourceMappingURL=Node.vue.map */",map:{version:3,sources:["/home/travis/build/retejs/vue-render-plugin/src/Node.vue","Node.vue"],names:[],mappings:"AAwCA;EACA,oCAAA;EACA,yBAAA;EACA,mBAAA;EACA,eAAA;EACA,gBAAA;EACA,YAAA;EACA,mBAAA;EACA,uBAAA;EACA,kBAAA;EACA,iBAAA;AAAA;AAVA;IAYA,oCAAA;AAAA;AAZA;IAcA,mBAAA;IACA,qBAAA;AAAA;AAfA;IAiBA,YAAA;IACA,uBAAA;IACA,eAAA;IACA,YAAA;AAAA;AApBA;IAsBA,iBAAA;AAAA;AAtBA;IAwBA,gBAAA;AAAA;AAxBA;IA0BA,sBAAA;IACA,YAAA;IACA,qBAAA;IACA,uBAAA;IACA,eAAA;IACA,WAAA;IACA,iBAAA;AAAA;AAhCA;IAkCA,UAAA;IACA,wBAAA;IACA,sBAAA;IACA,qBAAA;AAAA;AArCA;IAuCA,iBAAA;AAAA;;ACtCA,mCAAmC",file:"Node.vue",sourcesContent:['<template lang="pug">\n.node(:class="[selected(), node.name] | kebab")\n  .title {{node.name}}\n\n  // Outputs\n  .output(v-for=\'output in outputs()\' :key="output.key")\n    .output-title {{output.name}}\n    Socket(v-socket:output="output", type="output", :socket="output.socket")\n\n  // Controls\n  .control(\n    v-for=\'control in controls()\',\n    v-control="control"\n  )\n\n  // Inputs\n  .input(v-for=\'input in inputs()\' :key="input.key")\n    Socket(v-socket:input="input", type="input", :socket="input.socket")\n    .input-title(v-show=\'!input.showControl()\') {{input.name}}\n    .input-control(\n      v-show=\'input.showControl()\'\n      v-control="input.control"\n    )\n</template>\n\n<script>\nimport mixin from \'./mixin\';\nimport Socket from \'./Socket.vue\';\n\nexport default {\n  mixins: [mixin],\n  components: {\n    Socket\n  }\n}\n<\/script>\n\n<style lang="sass" scoped>\n@import "./vars"\n\n.node\n  background: $node-color\n  border: 2px solid #4e58bf\n  border-radius: 10px\n  cursor: pointer\n  min-width: $node-width\n  height: auto\n  padding-bottom: 6px\n  box-sizing: content-box\n  position: relative\n  user-select: none\n  &:hover\n    background: lighten($node-color,4%)\n  &.selected\n    background: $node-color-selected\n    border-color: #e3c000\n  .title\n    color: white\n    font-family: sans-serif\n    font-size: 18px\n    padding: 8px\n  .output\n    text-align: right\n  .input\n    text-align: left\n  .input-title,.output-title\n    vertical-align: middle\n    color: white\n    display: inline-block\n    font-family: sans-serif\n    font-size: 14px\n    margin: $socket-margin\n    line-height: $socket-size\n  .input-control\n    z-index: 1\n    width: calc(100% - #{$socket-size + 2*$socket-margin})\n    vertical-align: middle\n    display: inline-block\n  .control\n    padding: $socket-margin $socket-size/2 + $socket-margin\n</style>',".node {\n  background: rgba(110, 136, 255, 0.8);\n  border: 2px solid #4e58bf;\n  border-radius: 10px;\n  cursor: pointer;\n  min-width: 180px;\n  height: auto;\n  padding-bottom: 6px;\n  box-sizing: content-box;\n  position: relative;\n  user-select: none; }\n  .node:hover {\n    background: rgba(130, 153, 255, 0.8); }\n  .node.selected {\n    background: #ffd92c;\n    border-color: #e3c000; }\n  .node .title {\n    color: white;\n    font-family: sans-serif;\n    font-size: 18px;\n    padding: 8px; }\n  .node .output {\n    text-align: right; }\n  .node .input {\n    text-align: left; }\n  .node .input-title, .node .output-title {\n    vertical-align: middle;\n    color: white;\n    display: inline-block;\n    font-family: sans-serif;\n    font-size: 14px;\n    margin: 6px;\n    line-height: 24px; }\n  .node .input-control {\n    z-index: 1;\n    width: calc(100% - 36px);\n    vertical-align: middle;\n    display: inline-block; }\n  .node .control {\n    padding: 6px 18px; }\n\n/*# sourceMappingURL=Node.vue.map */"]},media:void 0})}),C,"data-v-61cff9dc",!1,void 0,y,void 0);function O(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=new r.a(d({render:function(t){return t(e,{props:n})}},o)),l=document.createElement("div");return t.appendChild(l),c.$mount(l),c}var j=function(t){return new Promise((function(e){if(!t.vueContext)return e();t.vueContext.$forceUpdate(),t.vueContext.$nextTick(e)}))};var I={name:"vue-render",install:function(t,e){var n=e.component,r=e.options;t.on("rendernode",(function(e){var o=e.el,l=e.node,component=e.component,f=e.bindSocket,h=e.bindControl;component.render&&"vue"!==component.render||(l._vue=function(t,e,n,r){var o=n.el,c=n.node,component=n.component,l=n.bindSocket,f=n.bindControl,h=O(o,component.component||e||S,d({},component.props,{node:c,editor:t,bindSocket:l,bindControl:f}),r);return c.vueContext=h.$children[0],h}(t,n,{el:o,node:l,component:component,bindSocket:f,bindControl:h},r),l.update=c(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(l);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))))})),t.on("rendercontrol",(function(t){var e=t.el,n=t.control;n.render&&"vue"!==n.render||(n._vue=function(t,e,n){var r=e.el,o=e.control,c=O(r,o.component,d({},o.props,{getData:o.getData.bind(o),putData:o.putData.bind(o)}),n);return o.vueContext=c.$children[0],c}(0,{el:e,control:n},r),n.update=c(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))))})),t.on("connectioncreated connectionremoved",(function(t){j(t.output.node),j(t.input.node)})),t.on("nodeselected",(function(){t.nodes.map(j)}))},mixin:f,Node:S,Socket:x};e.a=I},107:function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(25))},108:function(t,e,n){"use strict";var r=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},o=n(107),c="object"==typeof self&&self&&self.Object===Object&&self,l=o.a||c||Function("return this")(),d=function(){return l.Date.now()},f=l.Symbol,h=Object.prototype,v=h.hasOwnProperty,m=h.toString,A=f?f.toStringTag:void 0;var y=function(t){var e=v.call(t,A),n=t[A];try{t[A]=void 0;var r=!0}catch(t){}var o=m.call(t);return r&&(e?t[A]=n:delete t[A]),o},k=Object.prototype.toString;var w=function(t){return k.call(t)},x=f?f.toStringTag:void 0;var C=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":x&&x in Object(t)?y(t):w(t)};var E=function(t){return null!=t&&"object"==typeof t};var S=function(t){return"symbol"==typeof t||E(t)&&"[object Symbol]"==C(t)},O=/^\s+|\s+$/g,j=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,_=/^0o[0-7]+$/i,B=parseInt;var N=function(t){if("number"==typeof t)return t;if(S(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(O,"");var n=I.test(t);return n||_.test(t)?B(t.slice(2),n?2:8):j.test(t)?NaN:+t},R=Math.max,P=Math.min;var T=function(t,e,n){var o,c,l,f,h,v,m=0,A=!1,y=!1,k=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function w(time){var e=o,n=c;return o=c=void 0,m=time,f=t.apply(n,e)}function x(time){return m=time,h=setTimeout(E,e),A?w(time):f}function C(time){var t=time-v;return void 0===v||t>=e||t<0||y&&time-m>=l}function E(){var time=d();if(C(time))return S(time);h=setTimeout(E,function(time){var t=e-(time-v);return y?P(t,l-(time-m)):t}(time))}function S(time){return h=void 0,k&&o?w(time):(o=c=void 0,f)}function O(){var time=d(),t=C(time);if(o=arguments,c=this,v=time,t){if(void 0===h)return x(v);if(y)return clearTimeout(h),h=setTimeout(E,e),w(v)}return void 0===h&&(h=setTimeout(E,e)),f}return e=N(e)||0,r(n)&&(A=!!n.leading,l=(y="maxWait"in n)?R(N(n.maxWait)||0,e):l,k="trailing"in n?!!n.trailing:k),O.cancel=function(){void 0!==h&&clearTimeout(h),m=0,o=v=c=h=void 0},O.flush=function(){return void 0===h?f:S(d())},O};var $=function(t){if(!r(t))return!1;var e=C(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},M=n(1);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e,n,r,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void n(t)}d.done?e(f):Promise.resolve(f).then(r,o)}function L(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var c=t.apply(e,n);function l(t){z(c,r,o,l,d,"next",t)}function d(t){z(c,r,o,l,d,"throw",t)}l(void 0)}))}}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},e=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(source).filter((function(t){return Object.getOwnPropertyDescriptor(source,t).enumerable})))),e.forEach((function(e){F(t,e,source[e])}))}return t}function W(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,p){return(V=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function X(source,t){if(null==source)return{};var e,i,n=function(source,t){if(null==source)return{};var e,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(n[e]=source[e]);return n}(source,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(n[e]=source[e])}return n}function Z(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function K(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Q(t){return JSON.parse(JSON.stringify(t))}function tt(t,e){return et.apply(this,arguments)}function et(){return(et=L(regeneratorRuntime.mark((function t(component,e){var n,data,r,meta,o,c,l,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.data,data=void 0===n?{}:n,r=e.meta,meta=void 0===r?{}:r,o=e.x,c=void 0===o?0:o,l=e.y,d=void 0===l?0:l,t.next=3,component.createNode(Q(data));case 3:return(f=t.sent).meta=Object.assign(Q(meta),f.meta),f.position[0]=c,f.position[1]=d,t.abrupt("return",f);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function nt(t,e){var path=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];"object"===D(t)&&Object.keys(t).map((function(n){"function"==typeof t[n]?e(n,t[n],path):nt(t[n],e,[].concat(K(path),[n]))}))}var ot=function(t){return{props:{delay:{type:Number,required:!0}},data:function(){return{timeoutHide:function(){}}},methods:{cancelHide:function(){var t=this.timeoutHide;t&&t.cancel&&this.timeoutHide.cancel()}},mounted:function(){this.timeoutHide=T(this[t],this.delay)}}};const it={name:"Item",mixins:[ot("hideSubitems")],props:{item:Object,args:Object},data:function(){return{visibleSubitems:!1}},computed:{hasSubitems:function(){return this.item.subitems}},methods:{showSubitems:function(){this.visibleSubitems=!0,this.cancelHide()},hideSubitems:function(){this.visibleSubitems=!1},onClick:function(t){t.stopPropagation(),this.item.onClick&&this.item.onClick(this.args),this.$root.$emit("hide")}}};var st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item",class:{hasSubitems:t.hasSubitems},on:{click:function(e){t.onClick(e)},mouseover:function(e){t.showSubitems()},mouseleave:function(e){t.timeoutHide()}}},[t._v(t._s(t.item.title)),n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasSubitems&&this.visibleSubitems,expression:"hasSubitems && this.visibleSubitems"}],staticClass:"subitems"},t._l(t.item.subitems,(function(e){return n("Item",{key:e.title,attrs:{item:e,args:t.args,delay:t.delay}})})))])};st._withStripped=!0;var at=function(template,style,t,e,n,r,o,c){const component=("function"==typeof t?t.options:t)||{};component.__file="/home/travis/build/retejs/context-menu-plugin/src/menu/Item.vue",component.render||(component.render=template.render,component.staticRenderFns=template.staticRenderFns,component._compiled=!0,n&&(component.functional=!0)),component._scopeId=e;{let t;if(style&&(t=function(t){style.call(this,o(t))}),void 0!==t)if(component.functional){const e=component.render;component.render=function(n,r){return t.call(r),e(n,r)}}else{const e=component.beforeCreate;component.beforeCreate=e?[].concat(e,t):[t]}}return component}({render:st,staticRenderFns:[]},(function(t){t&&t("data-v-99007bda_0",{source:"\n@charset \"UTF-8\";\n.item[data-v-99007bda], .item .subitems .subitem[data-v-99007bda] {\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid rgba(69, 103, 255, 0.8);\n  background-color: rgba(110, 136, 255, 0.8);\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n}\n.item[data-v-99007bda]:first-child, .item .subitems .subitem[data-v-99007bda]:first-child {\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n.item[data-v-99007bda]:last-child, .item .subitems .subitem[data-v-99007bda]:last-child {\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n}\n.item[data-v-99007bda]:hover, .item .subitems .subitem[data-v-99007bda]:hover {\n    background-color: rgba(130, 153, 255, 0.8);\n}\n.hasSubitems.item[data-v-99007bda]:after, .item .subitems .hasSubitems.subitem[data-v-99007bda]:after {\n  content: '';\n  position: absolute;\n  opacity: 0.6;\n  right: 5px;\n  top: 5px;\n}\n.item .subitems[data-v-99007bda], .item .subitems .subitem .subitems[data-v-99007bda] {\n  position: absolute;\n  top: 0;\n  left: 100%;\n  width: 120px;\n}\n\n/*# sourceMappingURL=Item.vue.map */",map:{version:3,sources:["Item.vue","/home/travis/build/retejs/context-menu-plugin/src/menu/Item.vue"],names:[],mappings:";AAAA,iBAAiB;ACyDjB;EDvDE,YAAY;EACZ,aAAa;EACb,iDAAiD;EACjD,2CAA2C;EAC3C,gBAAgB;EAChB,YAAY;EACZ,mBAAmB;CAAE;ACiDvB;ID/CI,4BAA4B;IAC5B,6BAA6B;CAAE;AC8CnC;ID5CI,+BAA+B;IAC/B,gCAAgC;CAAE;AC2CtC;IDzCI,2CAA2C;CAAE;AC2CjD;EACA,aAAA;EACA,mBAAA;EACA,aAAA;EACA,WAAA;EACA,SAAA;CAAA;AAPA;EASA,mBAAA;EACA,OAAA;EACA,WAAA;EACA,aAAA;CAEA;;ADxCA,oCAAoC",file:"Item.vue",sourcesContent:["@charset \"UTF-8\";\n.item, .item .subitems .subitem {\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid rgba(69, 103, 255, 0.8);\n  background-color: rgba(110, 136, 255, 0.8);\n  cursor: pointer;\n  width: 100%;\n  position: relative; }\n  .item:first-child, .item .subitems .subitem:first-child {\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px; }\n  .item:last-child, .item .subitems .subitem:last-child {\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px; }\n  .item:hover, .item .subitems .subitem:hover {\n    background-color: rgba(130, 153, 255, 0.8); }\n\n.hasSubitems.item:after, .item .subitems .hasSubitems.subitem:after {\n  content: '';\n  position: absolute;\n  opacity: 0.6;\n  right: 5px;\n  top: 5px; }\n\n.item .subitems, .item .subitems .subitem .subitems {\n  position: absolute;\n  top: 0;\n  left: 100%;\n  width: 120px; }\n\n/*# sourceMappingURL=Item.vue.map */",null]},media:void 0})}),it,"data-v-99007bda",!1,0,(function t(){const head=document.head||document.getElementsByTagName("head")[0],e=t.styles||(t.styles={}),n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,r){if(document.querySelector('style[data-vue-ssr-id~="'+t+'"]'))return;const o=n?r.media||"default":t,style=e[o]||(e[o]={ids:[],parts:[],element:void 0});if(!style.ids.includes(t)){let code=r.source,e=style.ids.length;if(style.ids.push(t),n&&(style.element=style.element||document.querySelector("style[data-group="+o+"]")),!style.element){const t=style.element=document.createElement("style");t.type="text/css",r.media&&t.setAttribute("media",r.media),n&&(t.setAttribute("data-group",o),t.setAttribute("data-next-index","0")),head.appendChild(t)}if(n&&(e=parseInt(style.element.getAttribute("data-next-index")),style.element.setAttribute("data-next-index",e+1)),style.element.styleSheet)style.parts.push(code),style.element.styleSheet.cssText=style.parts.filter(Boolean).join("\n");else{const t=document.createTextNode(code),n=style.element.childNodes;n[e]&&style.element.removeChild(n[e]),n.length?style.element.insertBefore(t,n[e]):style.element.appendChild(t)}}}}));const ut={props:["value","search"],watch:{value:function(){this.$emit("search",this.value)}}};var ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])};ct._withStripped=!0;var lt=function(template,style,script,t,e,n,r,o){const component=("function"==typeof script?script.options:script)||{};component.__file="/home/travis/build/retejs/context-menu-plugin/src/menu/Search.vue",component.render||(component.render=template.render,component.staticRenderFns=template.staticRenderFns,component._compiled=!0,e&&(component.functional=!0)),component._scopeId=t;{let t;if(style&&(t=function(t){style.call(this,r(t))}),void 0!==t)if(component.functional){const e=component.render;component.render=function(n,r){return t.call(r),e(n,r)}}else{const e=component.beforeCreate;component.beforeCreate=e?[].concat(e,t):[t]}}return component}({render:ct,staticRenderFns:[]},(function(t){t&&t("data-v-5cbfea22_0",{source:"\n.search input[data-v-5cbfea22] {\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n}\n\n/*# sourceMappingURL=Search.vue.map */",map:{version:3,sources:["/home/travis/build/retejs/context-menu-plugin/src/menu/Search.vue","Search.vue"],names:[],mappings:";AAkBA;EAEA,aAAA;EACA,iBAAA;EACA,wBAAA;EACA,oBAAA;EACA,gBAAA;EACA,mBAAA;EACA,YAAA;EACA,uBAAA;EACA,wBAAA;CAAA;;ACjBA,sCAAsC",file:"Search.vue",sourcesContent:[null,".search input {\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent; }\n\n/*# sourceMappingURL=Search.vue.map */"]},media:void 0})}),ut,"data-v-5cbfea22",!1,0,(function t(){const head=document.head||document.getElementsByTagName("head")[0],e=t.styles||(t.styles={}),n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,r){if(document.querySelector('style[data-vue-ssr-id~="'+t+'"]'))return;const o=n?r.media||"default":t,style=e[o]||(e[o]={ids:[],parts:[],element:void 0});if(!style.ids.includes(t)){let code=r.source,e=style.ids.length;if(style.ids.push(t),n&&(style.element=style.element||document.querySelector("style[data-group="+o+"]")),!style.element){const t=style.element=document.createElement("style");t.type="text/css",r.media&&t.setAttribute("media",r.media),n&&(t.setAttribute("data-group",o),t.setAttribute("data-next-index","0")),head.appendChild(t)}if(n&&(e=parseInt(style.element.getAttribute("data-next-index")),style.element.setAttribute("data-next-index",e+1)),style.element.styleSheet)style.parts.push(code),style.element.styleSheet.cssText=style.parts.filter(Boolean).join("\n");else{const t=document.createTextNode(code),n=style.element.childNodes;n[e]&&style.element.removeChild(n[e]),n.length?style.element.insertBefore(t,n[e]):style.element.appendChild(t)}}}}));const pt={props:{searchBar:Boolean,searchKeep:Function},mixins:[ot("hide")],data:function(){return{x:0,y:0,visible:!1,args:{},filter:"",items:[]}},computed:{style:function(){return{top:this.y+"px",left:this.x+"px"}},filtered:function(){var t=this;if(!this.filter)return this.items;var e=new RegExp(this.filter,"i");return this.extractLeafs(this.items).filter((function(n){var title=n.title;return t.searchKeep(title)||title.match(e)}))}},methods:{extractLeafs:function(t){var e=this;if(!t)return[];var n=[];return t.map((function(t){t.subitems||n.push(t),n.push.apply(n,K(e.extractLeafs(t.subitems)))})),n},onSearch:function(t){this.filter=t},show:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.visible=!0,this.x=t,this.y=e,this.args=n,this.cancelHide()},hide:function(){this.visible=!1},additem:function(title,t){var path=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],e=this.items,n=!0,r=!1,o=void 0;try{for(var c,l=function(){var t=c.value,n=e.find((function(i){return i.title===t}));n||(n={title:t,subitems:[]},e.push(n)),e=n.subitems||(n.subitems=[])},d=path[Symbol.iterator]();!(n=(c=d.next()).done);n=!0)l()}catch(t){r=!0,o=t}finally{try{n||null==d.return||d.return()}finally{if(r)throw o}}e.push({title:title,onClick:t})}},updated:function(){if(this.$refs.menu){var t=(n=[this.x,this.y],element=this.$refs.menu,r=G(n,2),o=r[0],c=r[1],[Math.min(o,window.innerWidth-element.clientWidth),Math.min(c,window.innerHeight-element.clientHeight)]),e=G(t,2);this.x=e[0],this.y=e[1]}var n,element,r,o,c},mounted:function(){this.$root.$on("show",this.show),this.$root.$on("hide",this.hide),this.$root.$on("additem",this.additem)},components:{Item:at,Search:lt}};var ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{ref:"menu",staticClass:"context-menu",style:t.style,on:{mouseleave:function(e){t.timeoutHide()},mouseover:function(e){t.cancelHide()},contextmenu:function(t){t.preventDefault()}}},[t.searchBar?n("Search",{on:{search:t.onSearch},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e(),t._l(t.filtered,(function(e){return n("Item",{key:e.title,attrs:{item:e,args:t.args,delay:t.delay/2}})}))],2):t._e()};ft._withStripped=!0;var ht=function(template,style,script,t,e,n,r,o){const component=("function"==typeof script?script.options:script)||{};component.__file="/home/travis/build/retejs/context-menu-plugin/src/menu/Menu.vue",component.render||(component.render=template.render,component.staticRenderFns=template.staticRenderFns,component._compiled=!0,e&&(component.functional=!0)),component._scopeId=t;{let t;if(style&&(t=function(t){style.call(this,r(t))}),void 0!==t)if(component.functional){const e=component.render;component.render=function(n,r){return t.call(r),e(n,r)}}else{const e=component.beforeCreate;component.beforeCreate=e?[].concat(e,t):[t]}}return component}({render:ft,staticRenderFns:[]},(function(t){t&&t("data-v-189764d4_0",{source:"\n.item[data-v-189764d4], .context-menu .search[data-v-189764d4] {\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid rgba(69, 103, 255, 0.8);\n  background-color: rgba(110, 136, 255, 0.8);\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n}\n.item[data-v-189764d4]:first-child, .context-menu .search[data-v-189764d4]:first-child {\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n.item[data-v-189764d4]:last-child, .context-menu .search[data-v-189764d4]:last-child {\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n}\n.item[data-v-189764d4]:hover, .context-menu .search[data-v-189764d4]:hover {\n    background-color: rgba(130, 153, 255, 0.8);\n}\n.context-menu[data-v-189764d4] {\n  left: 0;\n  top: 0;\n  position: fixed;\n  padding: 10px;\n  width: 120px;\n  margin-top: -20px;\n  margin-left: -60px;\n}\n\n/*# sourceMappingURL=Menu.vue.map */",map:{version:3,sources:["Menu.vue","/home/travis/build/retejs/context-menu-plugin/src/menu/Menu.vue"],names:[],mappings:";AAAA;EACE,YAAY;EACZ,aAAa;EACb,iDAAiD;EACjD,2CAA2C;EAC3C,gBAAgB;EAChB,YAAY;EACZ,mBAAmB;CAAE;AACrB;IACE,4BAA4B;IAC5B,6BAA6B;CAAE;AACjC;IACE,+BAA+B;IAC/B,gCAAgC;CAAE;AACpC;IACE,2CAA2C;CAAE;ACuGjD;EACA,QAAA;EACA,OAAA;EACA,gBAAA;EACA,cAAA;EACA,aAAA;EACA,kBAAA;EACA,mBAAA;CAEA;;ADrGA,oCAAoC",file:"Menu.vue",sourcesContent:[".item, .context-menu .search {\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid rgba(69, 103, 255, 0.8);\n  background-color: rgba(110, 136, 255, 0.8);\n  cursor: pointer;\n  width: 100%;\n  position: relative; }\n  .item:first-child, .context-menu .search:first-child {\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px; }\n  .item:last-child, .context-menu .search:last-child {\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px; }\n  .item:hover, .context-menu .search:hover {\n    background-color: rgba(130, 153, 255, 0.8); }\n\n.context-menu {\n  left: 0;\n  top: 0;\n  position: fixed;\n  padding: 10px;\n  width: 120px;\n  margin-top: -20px;\n  margin-left: -60px; }\n\n/*# sourceMappingURL=Menu.vue.map */",null]},media:void 0})}),pt,"data-v-189764d4",!1,0,(function t(){const head=document.head||document.getElementsByTagName("head")[0],e=t.styles||(t.styles={}),n="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,r){if(document.querySelector('style[data-vue-ssr-id~="'+t+'"]'))return;const o=n?r.media||"default":t,style=e[o]||(e[o]={ids:[],parts:[],element:void 0});if(!style.ids.includes(t)){let code=r.source,e=style.ids.length;if(style.ids.push(t),n&&(style.element=style.element||document.querySelector("style[data-group="+o+"]")),!style.element){const t=style.element=document.createElement("style");t.type="text/css",r.media&&t.setAttribute("media",r.media),n&&(t.setAttribute("data-group",o),t.setAttribute("data-next-index","0")),head.appendChild(t)}if(n&&(e=parseInt(style.element.getAttribute("data-next-index")),style.element.setAttribute("data-next-index",e+1)),style.element.styleSheet)style.parts.push(code),style.element.styleSheet.cssText=style.parts.filter(Boolean).join("\n");else{const t=document.createTextNode(code),n=style.element.childNodes;n[e]&&style.element.removeChild(n[e]),n.length?style.element.insertBefore(t,n[e]):style.element.appendChild(t)}}}})),vt=function(){function t(e,n,r){U(this,t);var o=document.createElement("div");e.view.container.appendChild(o),this.menu=new M.a({render:function(t){return t(r||ht,{props:n})}}).$mount(o)}var e,n,r;return e=t,(n=[{key:"addItem",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=this.menu).$emit.apply(t,["additem"].concat(n))}},{key:"show",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=this.menu).$emit.apply(t,["show"].concat(n))}},{key:"hide",value:function(){this.menu.$emit("hide")}}])&&Y(e.prototype,n),r&&Y(e,r),t}(),mt=function(t){function e(t,n,r,o){var c,l=o.items,d=o.allocate,f=o.rename;U(this,e),c=Z(this,J(e).call(this,t,n,r));var h={x:0,y:0};t.on("mousemove",(function(t){var e=t.x,n=t.y;h.x=e,h.y=n}));var v=!0,m=!1,A=void 0;try{for(var y,k=function(){var component=y.value,path=d(component);Array.isArray(path)&&c.addItem(f(component),L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,tt(component,h);case 3:e.t1=e.sent,e.t0.addNode.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)}))),path)},w=t.components.values()[Symbol.iterator]();!(v=(y=w.next()).done);v=!0)k()}catch(t){m=!0,A=t}finally{try{v||null==w.return||w.return()}finally{if(m)throw A}}return nt(l,(function(t,e,path){return c.addItem(t,e,path)})),c}return W(e,t),e}(vt),At=function(t){function e(t,n,r,o){var c;return U(this,e),c=Z(this,J(e).call(this,t,n,r)),!1!==o.Delete&&c.addItem("Delete",(function(e){var n=e.node;return t.removeNode(n)})),!1!==o.Clone&&c.addItem("Clone",function(){var e=L(regeneratorRuntime.mark((function e(n){var r,o,c,l,d,f,component,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.node,o=r.name,c=G(r.position,2),l=c[0],d=c[1],f=X(r,["name","position"]),component=t.components.get(o),e.next=4,tt(component,H({},f,{x:l+10,y:d+10}));case 4:h=e.sent,t.addNode(h);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),nt(o,(function(t,e,path){return c.addItem(t,e,path)})),c}return W(e,t),e}(vt);var bt={name:"context-menu",install:function(t,e){var n=e.searchBar,r=void 0===n||n,o=e.searchKeep,c=void 0===o?function(){return!1}:o,l=e.delay,d=void 0===l?1e3:l,f=e.items,h=void 0===f?{}:f,v=e.nodeItems,m=void 0===v?{}:v,A=e.allocate,y=void 0===A?function(){return[]}:A,k=e.rename,w=void 0===k?function(component){return component.name}:k,x=e.vueComponent,C=void 0===x?null:x;t.bind("hidecontextmenu"),t.bind("showcontextmenu");var menu=null;t.on("hidecontextmenu",(function(){menu&&menu.hide()})),t.on("click contextmenu",(function(){t.trigger("hidecontextmenu")})),t.on("contextmenu",(function(e){var n=e.e,o=e.node;if(n.preventDefault(),n.stopPropagation(),t.trigger("showcontextmenu",{e:n,node:o})){var l=[n.clientX,n.clientY],f=l[0],v=l[1];o?(menu=new At(t,{searchBar:!1,delay:d},C,$(m)?m(o):m)).show(f,v,{node:o}):(menu=new mt(t,{searchBar:r,searchKeep:c,delay:d},C,{items:h,allocate:y,rename:w})).show(f,v)}}))}};e.a=bt},11:function(t,e,n){"use strict";function r(t,p){return(r=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return o}))},22:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return r}))},32:function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var d=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||d)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||d):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r},33:function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(c=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(data," */")),o=n.sources.map((function(source){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(source," */")}));return[content].concat(o).concat([r]).join("\n")}var c,l,data;return[content].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(content,"}"):content})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);r&&o[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),e.push(d))}},e}},34:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],c=o[0],l={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(e),n.d(e,"default",(function(){return A}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,d=0,f=!1,h=function(){},v=null,m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function A(t,e,n,o){f=n,v=o||{};var l=r(t,e);return y(l),function(e){for(var n=[],i=0;i<l.length;i++){var o=l[i];(d=c[o.id]).refs--,n.push(d)}e?y(l=r(t,e)):l=[];for(i=0;i<n.length;i++){var d;if(0===(d=n[i]).refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete c[d.id]}}}}function y(t){for(var i=0;i<t.length;i++){var e=t[i],n=c[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(w(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(w(e.parts[r]));c[e.id]={id:e.id,refs:1,parts:o}}}}function k(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function w(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(f)return h;r.parentNode.removeChild(r)}if(m){var o=d++;r=l||(l=k()),e=E.bind(null,r,o,!1),n=E.bind(null,r,o,!0)}else r=k(),e=S.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var x,C=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function E(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=C(e,o);else{var c=document.createTextNode(o),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(c,l[e]):t.appendChild(c)}}function S(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),v.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},43:function(t,e,n){"use strict";function r(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",(function(){return r}))},6:function(t,e,n){"use strict";function r(t,e,n,r,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void n(t)}d.done?e(f):Promise.resolve(f).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,c){var l=t.apply(e,n);function d(t){r(l,o,c,d,f,"next",t)}function f(t){r(l,o,c,d,f,"throw",t)}d(void 0)}))}}n.d(e,"a",(function(){return o}))},62:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},7:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},76:function(t,e,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var d=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||d)?t(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||d):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r},8:function(t,e,n){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return o}))},9:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))}}]);